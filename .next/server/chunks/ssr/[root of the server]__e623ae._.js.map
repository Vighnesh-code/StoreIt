{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/components/Sort.tsx"],"sourcesContent":["import React from \"react\";\r\n\r\nconst Sort = () => {\r\n  return <div>Sort</div>;\r\n};\r\n\r\nexport default Sort;\r\n"],"names":[],"mappings":";;;;;AAEA,MAAM,OAAO;IACX,qBAAO,8OAAC;kBAAI;;;;;;AACd;uCAEe"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/lib/actions/file.actions.ts"],"sourcesContent":["\"use server\";\r\n\r\nimport { createAdminClient } from \"../appwrite\";\r\nimport { InputFile } from \"node-appwrite/file\";\r\nimport { appwriteConfig } from \"../appwrite/config\";\r\nimport { ID, Models, Query } from \"node-appwrite\";\r\nimport { constructFileUrl, getFileType, parseStringify } from \"../utils\";\r\nimport { revalidatePath } from \"next/cache\";\r\nimport { getCurrentUser } from \"./user.actions\";\r\n\r\nconst handleError = (error: unknown, message: string) => {\r\n  console.log(error, message);\r\n  throw error;\r\n};\r\n\r\nexport const uploadFile = async ({\r\n  file,\r\n  ownerId,\r\n  accountId,\r\n  path,\r\n}: UploadFileProps) => {\r\n  const { storage, databases } = await createAdminClient();\r\n\r\n  try {\r\n    const inputFile = InputFile.fromBuffer(file, file.name);\r\n\r\n    const bucketFile = await storage.createFile(\r\n      appwriteConfig.bucketId,\r\n      ID.unique(),\r\n      inputFile\r\n    );\r\n\r\n    const fileDocument = {\r\n      type: getFileType(bucketFile.name).type,\r\n      name: bucketFile.name,\r\n      url: constructFileUrl(bucketFile.$id),\r\n      extension: getFileType(bucketFile.name).extension,\r\n      size: bucketFile.sizeOriginal,\r\n      owner: ownerId,\r\n      accountId,\r\n      users: [],\r\n      bucketFileId: bucketFile.$id,\r\n    };\r\n\r\n    const newFile = await databases\r\n      .createDocument(\r\n        appwriteConfig.databaseId,\r\n        appwriteConfig.filesCollectionId,\r\n        ID.unique(),\r\n        fileDocument\r\n      )\r\n      .catch(async (error: unknown) => {\r\n        await storage.deleteFile(appwriteConfig.bucketId, bucketFile.$id);\r\n        handleError(error, \"Failed to create the file document.\");\r\n      });\r\n\r\n    revalidatePath(path);\r\n    return parseStringify(newFile);\r\n  } catch (error) {\r\n    handleError(error, \"Failed to upload file.\");\r\n  }\r\n};\r\n\r\nconst createQueries = (currentUser: Models.Document) => {\r\n  const queries = [\r\n    Query.or([\r\n      Query.equal(\"owner\", [currentUser.$id]),\r\n      Query.contains(\"users\", [currentUser.email]),\r\n    ]),\r\n  ];\r\n\r\n  // TODO: Search, sorts, limits ...\r\n\r\n  return queries;\r\n};\r\n\r\nexport const getFiles = async () => {\r\n  const { databases } = await createAdminClient();\r\n\r\n  try {\r\n    const currentUser = await getCurrentUser();\r\n    if (!currentUser) throw new Error(\"User Not Found\");\r\n\r\n    const queries = createQueries(currentUser);\r\n\r\n    const files = await databases.listDocuments(\r\n      appwriteConfig.databaseId,\r\n      appwriteConfig.filesCollectionId,\r\n      queries\r\n    );\r\n\r\n    return parseStringify(files);\r\n  } catch (error) {\r\n    handleError(error, \"Failed to get the files.\");\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAHA;AAAA;;;;;;;;;;AAKA,MAAM,cAAc,CAAC,OAAgB;IACnC,QAAQ,GAAG,CAAC,OAAO;IACnB,MAAM;AACR;AAEO,MAAM,aAAa,OAAO,EAC/B,IAAI,EACJ,OAAO,EACP,SAAS,EACT,IAAI,EACY;IAChB,MAAM,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,MAAM,CAAA,GAAA,wHAAA,CAAA,oBAAiB,AAAD;IAErD,IAAI;QACF,MAAM,YAAY,sJAAA,CAAA,YAAS,CAAC,UAAU,CAAC,MAAM,KAAK,IAAI;QAEtD,MAAM,aAAa,MAAM,QAAQ,UAAU,CACzC,yHAAA,CAAA,iBAAc,CAAC,QAAQ,EACvB,+IAAA,CAAA,KAAE,CAAC,MAAM,IACT;QAGF,MAAM,eAAe;YACnB,MAAM,CAAA,GAAA,4GAAA,CAAA,cAAW,AAAD,EAAE,WAAW,IAAI,EAAE,IAAI;YACvC,MAAM,WAAW,IAAI;YACrB,KAAK,CAAA,GAAA,4GAAA,CAAA,mBAAgB,AAAD,EAAE,WAAW,GAAG;YACpC,WAAW,CAAA,GAAA,4GAAA,CAAA,cAAW,AAAD,EAAE,WAAW,IAAI,EAAE,SAAS;YACjD,MAAM,WAAW,YAAY;YAC7B,OAAO;YACP;YACA,OAAO,EAAE;YACT,cAAc,WAAW,GAAG;QAC9B;QAEA,MAAM,UAAU,MAAM,UACnB,cAAc,CACb,yHAAA,CAAA,iBAAc,CAAC,UAAU,EACzB,yHAAA,CAAA,iBAAc,CAAC,iBAAiB,EAChC,+IAAA,CAAA,KAAE,CAAC,MAAM,IACT,cAED,KAAK,CAAC,OAAO;YACZ,MAAM,QAAQ,UAAU,CAAC,yHAAA,CAAA,iBAAc,CAAC,QAAQ,EAAE,WAAW,GAAG;YAChE,YAAY,OAAO;QACrB;QAEF,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;QACf,OAAO,CAAA,GAAA,4GAAA,CAAA,iBAAc,AAAD,EAAE;IACxB,EAAE,OAAO,OAAO;QACd,YAAY,OAAO;IACrB;AACF;AAEA,MAAM,gBAAgB,CAAC;IACrB,MAAM,UAAU;QACd,kJAAA,CAAA,QAAK,CAAC,EAAE,CAAC;YACP,kJAAA,CAAA,QAAK,CAAC,KAAK,CAAC,SAAS;gBAAC,YAAY,GAAG;aAAC;YACtC,kJAAA,CAAA,QAAK,CAAC,QAAQ,CAAC,SAAS;gBAAC,YAAY,KAAK;aAAC;SAC5C;KACF;IAED,kCAAkC;IAElC,OAAO;AACT;AAEO,MAAM,WAAW;IACtB,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,CAAA,GAAA,wHAAA,CAAA,oBAAiB,AAAD;IAE5C,IAAI;QACF,MAAM,cAAc,MAAM,CAAA,GAAA,iIAAA,CAAA,iBAAc,AAAD;QACvC,IAAI,CAAC,aAAa,MAAM,IAAI,MAAM;QAElC,MAAM,UAAU,cAAc;QAE9B,MAAM,QAAQ,MAAM,UAAU,aAAa,CACzC,yHAAA,CAAA,iBAAc,CAAC,UAAU,EACzB,yHAAA,CAAA,iBAAc,CAAC,iBAAiB,EAChC;QAGF,OAAO,CAAA,GAAA,4GAAA,CAAA,iBAAc,AAAD,EAAE;IACxB,EAAE,OAAO,OAAO;QACd,YAAY,OAAO;IACrB;AACF;;;IAhFa;IA6DA;;AA7DA,+OAAA;AA6DA,+OAAA"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["turbopack://[project]/app/(root)/[type]/page.tsx"],"sourcesContent":["\"use server\";\r\n\r\nimport Card from \"@/components/Card\";\r\nimport Sort from \"@/components/Sort\";\r\nimport { getFiles } from \"@/lib/actions/file.actions\";\r\nimport { Models } from \"node-appwrite\";\r\nimport React from \"react\";\r\n\r\nconst page = async ({ params }: SearchParamProps) => {\r\n  const type = ((await params)?.type as string) || \"\";\r\n  const files = await getFiles();\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      <section className=\"w-full\">\r\n        <h1 className=\"h1 capitalize\">{type}</h1>\r\n        <div className=\"total-size-section\">\r\n          <p className=\"body-1\">\r\n            Total: <span className=\"h5\">0 MB</span>\r\n          </p>\r\n\r\n          <div className=\"sort-container\">\r\n            <p className=\"body-1 hidden sm:block text-light-200\">Sort by:</p>\r\n            <Sort />\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      {/* Render the file types */}\r\n      {files.total > 0 ? (\r\n        <section className=\"file-list\">\r\n          {files.documents.map((file: Models.Document) => (\r\n            <Card file={file} />\r\n          ))}\r\n        </section>\r\n      ) : (\r\n        <p className=\"empty-list\">No Files uploaded.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default page;\r\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AACA;;;;;;;;AAIA,MAAM,OAAO,OAAO,EAAE,MAAM,EAAoB;IAC9C,MAAM,OAAO,AAAC,CAAC,MAAM,MAAM,GAAG,QAAmB;IACjD,MAAM,QAAQ,MAAM,CAAA,GAAA,iIAAA,CAAA,WAAQ,AAAD;IAE3B,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAQ,WAAU;;kCACjB,8OAAC;wBAAG,WAAU;kCAAiB;;;;;;kCAC/B,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAE,WAAU;;oCAAS;kDACb,8OAAC;wCAAK,WAAU;kDAAK;;;;;;;;;;;;0CAG9B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAE,WAAU;kDAAwC;;;;;;kDACrD,8OAAC,mHAAA,CAAA,UAAI;;;;;;;;;;;;;;;;;;;;;;;YAMV,MAAM,KAAK,GAAG,kBACb,8OAAC;gBAAQ,WAAU;0BAChB,MAAM,SAAS,CAAC,GAAG,CAAC,CAAC,qBACpB,8OAAC,mHAAA,CAAA,UAAI;wBAAC,MAAM;;;;;;;;;;qCAIhB,8OAAC;gBAAE,WAAU;0BAAa;;;;;;;;;;;;AAIlC;uCAEe;;;IAAA;;AAAA,+OAAA"}},
    {"offset": {"line": 252, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}